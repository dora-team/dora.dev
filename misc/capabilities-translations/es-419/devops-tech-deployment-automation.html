<html devsite><head><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <title>Tecnología de DevOps: Automatización de implementaciones</title>
    <meta name="book_path" value="/architecture/devops/_book.yaml"/>
    <meta name="project_path" value="/architecture/devops/_project.yaml"/>
    <meta name="translation_service" value="machine_translation_light_post_edit"/>
  </head>
  <body>

<aside class="note"><strong>Nota:</strong><span> La <em>Automatización de la implementación</em> es una de las opciones de capacidad que impulsa una entrega de software más alta y un rendimiento organizativo. Estas funciones se descubrieron mediante el <a href="https://www.devops-research.com/research.html">programa de investigación de DevOps de DORA</a>, una investigación independiente y rigurosa desde el punto de vista académico sobre las prácticas y las funciones que impulsan el alto rendimiento. Para obtener más información, lee nuestros <a href="/devops">recursos de DevOps</a>.</span></aside>
<p>La automatización de implementaciones es lo que te permite implementar el software en entornos de prueba y producción con solo presionar un botón. La automatización es esencial para reducir el riesgo de implementaciones de producción. También es esencial para proporcionar comentarios rápidos sobre la calidad del software, ya que permite que los equipos realicen pruebas integrales lo antes posible después de los cambios.</p>

<p>Un proceso de implementación automatizada tiene las siguientes entradas:</p>

<ul>
<li>Paquetes creados mediante el proceso de integración continua (CI). Estos paquetes deben poder implementarse en cualquier entorno, incluido el de producción.</li>
<li>Secuencias de comandos para configurar el entorno, implementar los paquetes y realizar una prueba de implementación (también conocida como <em>prueba de humo</em>).</li>
<li>Información de configuración específica del entorno.</li>
</ul>

<p>Te recomendamos que almacenes la información de configuración y secuencias de comandos en el control de versión. En el proceso de implementación, se deben descargar los paquetes de un repositorio de artefactos (por ejemplo, <a href="/artifact-registry" track-type="article" track-name="internalLink" track-metadata-position="body">Artifact Registry</a>, <a href="https://www.sonatype.com/nexus-repository-sonatype" target="external" track-type="article" track-name="externalLink" track-metadata-position="body" class="external">Nexus</a>, <a href="https://jfrog.com/artifactory/" target="external" track-type="article" track-name="externalLink" track-metadata-position="body" class="external">Artifactory</a> o el repositorio integrado de la herramienta de CI).</p>

<p>Mediante las secuencias de comandos, se suelen realizar las siguientes tareas:</p>

<ol>
<li>Se prepara el entorno de destino, tal vez mediante la instalación y configuración de cualquier software necesario, o mediante el inicio de un host virtual desde una imagen ya preparada en un proveedor de servicios en la nube, como Google Cloud.</li>
<li>Se implementan los paquetes.</li>
<li>Se realiza cualquier tarea relacionada con la implementación, como la ejecución de secuencias de comandos de migración de bases de datos.</li>
<li>Se realiza cualquier configuración necesaria.</li>
<li>Se realiza una prueba de implementación para asegurarse de que todos los servicios externos necesarios sean accesibles y que el sistema funcione.</li>
</ol>

<h2 id="how_to_implement_deployment_automation" data-text="Cómo automatizar implementaciones">Cómo implementar la automatización de implementaciones</h2>

<p>Cuando diseñas el proceso de implementación automatizado, recomendamos que sigas estas prácticas recomendadas:</p>

<ul>
<li><strong>Usa el mismo proceso de implementación para todos los entornos, incluido el de producción.</strong> Esta regla ayuda a garantizar que pruebes el proceso de implementación muchas veces antes de usarlo para implementar en producción.</li>
<li><strong>Permite que cualquier persona con las credenciales necesarias implemente cualquier versión del artefacto en cualquier entorno a pedido de forma completamente automatizada.</strong>
Si tienes que crear un ticket y esperar a que alguien prepare un entorno, no tendrás un proceso de implementación completamente automatizado.</li>
<li><strong>Usa los mismos paquetes para cada entorno.</strong> Esta regla significa que debes mantener la configuración específica del entorno separada de los paquetes.
De esa manera, sabrás que los paquetes que implementas en producción son los mismos que probaste.</li>
<li><strong>Permite recrear el estado de cualquier entorno a partir de la información almacenada en el control de versión.</strong> Esta regla ayuda a garantizar que las implementaciones sean repetibles y que, en caso de una situación de recuperación ante desastres, puedas restablecer el estado de producción de forma determinista.</li>
</ul>

<p>Lo ideal es que tengas una herramienta que puedas usar de forma autónoma para realizar implementaciones, que registre qué compilaciones se encuentran en cada entorno en ese momento y, también, el resultado del proceso de implementación con fines de auditoría. Muchas herramientas de CI tienen estas funciones.</p>

<h2 id="common_pitfalls_in_deployment_automation" data-text="Errores comunes en la automatización de implementaciones">Errores comunes en la automatización de implementaciones</h2>

<p>Cuando automatizas un proceso de implementación, puedes encontrar las siguientes dificultades:</p>

<ul>
<li>Complejidad del proceso existente</li>
<li>Dependencias entre servicios</li>
<li>Componentes que no están diseñados para la automatización</li>
<li>Falta de colaboración entre los equipos</li>
</ul>

<h3 id="complexity" data-text="Complejidad">Complejidad</h3>

<p>La primera dificultad es la complejidad. La automatización de un proceso manual complejo y frágil produce un proceso automatizado complejo y frágil. Primero, debes volver a diseñar la arquitectura para la implementación. Esto significa que debes hacer que la secuencia de comandos de implementación sea lo más simple posible y que debes enviar la complejidad al código de la aplicación y a la plataforma de infraestructura. Busca modos de falla de implementación y pregúntate cómo podrías evitarlos si haces que los servicios, los componentes, la plataforma de infraestructura y la supervisión sean más inteligentes. Por lo general, las aplicaciones nativas de la nube que se ejecutan en una plataforma como servicio, como <a href="/appengine" track-type="article" track-name="internalLink" track-metadata-position="body">App Engine</a>, <a href="/run" track-type="article" track-name="internalLink" track-metadata-position="body">Cloud Run</a> o <a href="/architecture/cloud-foundry-on-gcp" track-type="article" track-name="internalLink" track-metadata-position="body">Pivotal Cloud Foundry</a>, se pueden implementar mediante la ejecución de un solo comando, sin secuencias de comandos de implementación; este es el proceso ideal.</p>

<p>Un proceso de implementación confiable tiene dos propiedades importantes. En primer lugar, los pasos individuales del proceso de implementación deben, en la medida de lo posible, ser idempotentes, para que puedas repetirlos tantas veces como sea necesario en caso de una falla. En segundo lugar, deben ser independientes del orden, lo que significa que los componentes y los servicios no deben fallar de forma descontrolada si falta algún otro componente o servicio. En su lugar, los servicios deben seguir funcionando de manera degradada hasta que sus dependencias estén disponibles.</p>

<p>En el caso de productos y servicios nuevos, te recomendamos que consideres estos principios como requisitos del sistema desde el comienzo de la fase de diseño. Si actualizas la automatización de un sistema existente, es posible que necesites realizar algunas tareas para implementar estas características o compilar en telemetría, de modo que el proceso de implementación pueda detectar estados inconsistentes y fallar de forma controlada.</p>

<h3 id="dependencies" data-text="Dependencias">Dependencias</h3>

<p>La segunda dificultad es que muchos procesos de implementación, en particular en entornos empresariales, requieren organización. En otras palabras, debes implementar varios servicios juntos en un orden particular, mientras realizas otras tareas, como migraciones de bases de datos en estricta sincronización. Aunque existen muchas herramientas de flujo de trabajo de implementación empresarial para resolver esta situación, no resuelven el problema de arquitectura por completo: una relación estrecha entre los diversos componentes y servicios. Con el tiempo, deberás abordar esta relación estrecha. El objetivo es que los servicios se puedan implementar de forma independiente, sin necesidad de una organización.</p>

<p>Por lo general, este enfoque requiere un diseño detallado para garantizar que cada servicio admita la retrocompatibilidad, de modo que los clientes del servicio no requieran la actualización en el bloqueo, pero se puede actualizar de forma independiente en una fecha posterior.
Las técnicas como el <a href="/architecture/migrating-a-monolithic-app-to-microservices-gke#api_contracts" track-type="article" track-name="internalLink" track-metadata-position="body">control de versiones de la API</a> pueden ayudar con esto. También es importante asegurarse de que los servicios puedan seguir en funcionamiento (tal vez con algunas funciones no disponibles), incluso si no pueden conectarse a otros servicios de los que dependen. Este diseño es adecuado para los sistemas distribuidos, ya que puede ayudar a evitar fallas en cascada. En el libro de Michael Nygard “Release It!” (“Actualízalo”), se describe una serie de patrones para ayudar a diseñar sistemas distribuidos, incluidos los <a href="https://martinfowler.com/bliki/CircuitBreaker.html" target="external" track-type="article" track-name="externalLink" track-metadata-position="body" class="external">interruptores de circuitos</a>.
Incluso puedes separar las actualizaciones de la base de datos de los servicios de los que dependen mediante el <a href="https://martinfowler.com/bliki/ParallelChange.html" target="external" track-type="article" track-name="externalLink" track-metadata-position="body" class="external">patrón de cambio paralelo</a>.</p>

<h3 id="not_designed_for_automation" data-text="No están diseñados para la automatización">No están diseñados para la automatización</h3>

<p>La tercera dificultad común es que los componentes no estén diseñados para la automatización. Cualquier proceso de implementación que requiera el acceso a una consola y la interacción manual mediante un clic debe ser un objetivo de mejora. En la actualidad, la mayoría de las plataformas (incluida Google Cloud) ofrecen una API que la secuencia de comandos de implementación puede usar. Si ese no es el caso, debes ser creativo y evitar esa intervención manual. Puedes buscar la base de datos o el archivo de configuración subyacente de la herramienta y hacerle cambios directamente, o puedes reemplazarla por otra herramienta que tenga una API.</p>

<h3 id="poor_collaboration_between_teams" data-text="Falta de colaboración entre equipos">Falta de colaboración entre equipos</h3>

<p>La última dificultad se presenta cuando los desarrolladores y los equipos de operaciones de TI no están sincronizados.
Esto puede suceder de varias maneras. Por ejemplo, los desarrolladores pueden usar un método para la implementación diferente del que usan los equipos de operaciones de TI. Por otro lado, si los entornos están configurados de otro modo, aumentarás de forma considerable el riesgo de que los equipos de operaciones de TI realicen el proceso de implementación de forma manual, lo que genera inconsistencias y errores. Los desarrolladores y los equipos de operaciones de TI deben crear el proceso de automatización de implementaciones en conjunto. Este enfoque garantiza que ambos equipos puedan comprender, mantener y mejorar la automatización de implementaciones.</p>

<h2 id="ways_to_improve_deployment_automation" data-text="Formas de mejorar la automatización de implementaciones">Formas de mejorar la automatización de implementaciones</h2>

<p>El primer paso es documentar el proceso de implementación existente en una herramienta común a la que tengan acceso los desarrolladores y equipos de operaciones, como Documentos de Google o una wiki.
Luego, trabaja para simplificar y automatizar el proceso de implementación de forma incremental. En general, este enfoque incluye las siguientes tareas:</p>

<ul>
<li>Empaquetado del código de manera adecuada para la implementación</li>
<li>Creación de contenedores o imágenes de máquinas virtuales preconfigurados</li>
<li>Automatización de la implementación y la configuración de middleware</li>
<li>Copia de paquetes o archivos en el entorno de producción</li>
<li>Reinicio de servidores, aplicaciones o servicios</li>
<li>Generación de archivos de configuración a partir de plantillas</li>
<li>Ejecución de pruebas de implementación automatizadas para garantizar que el sistema funcione y esté configurado de forma correcta</li>
<li>Ejecución de procedimientos de prueba</li>
<li>Secuencia de comandos y automatización de las migraciones de bases de datos</li>
</ul>

<p>Trabaja para quitar los pasos manuales y, además, implementar la idempotencia y la independencia de orden siempre que sea posible. También, aprovecha las capacidades de la plataforma de infraestructura siempre que sea posible. Recuerda que la automatización de implementaciones debe ser lo más simple posible.</p>

<h2 id="ways_to_measure_deployment_automation" data-text="Formas de medir la automatización de implementaciones">Formas de medir la automatización de implementaciones</h2>

<p>Medir la automatización de implementaciones es sencillo.</p>

<ul>
<li><strong>Cuenta la cantidad de pasos manuales en el proceso de implementación</strong>. Trabaja para reducir esos pasos de forma sistemática. La cantidad de pasos manuales aumenta el tiempo de implementación y la oportunidad de que se genere un error.</li>
<li><strong>Mide el nivel (o porcentaje) de la automatización en la canalización de implementación</strong>. Trabaja para aumentar ese nivel de forma continua.</li>
<li><strong>Determina el tiempo dedicado a los retrasos en la canalización de implementación</strong>. A medida que trabajas para reducir estos retrasos, comprende dónde y por qué se bloquea el código en la canalización de implementación.</li>
</ul>

<h2 id="whats_next" data-text="Próximos pasos">¿Qué sigue?</h2>

<ul>
<li>Para ver vínculos a otros artículos y recursos, consulta la <a href="/devops" track-type="solution" track-name="internalLink" track-metadata-position="body">página de DevOps</a>.</li>
<li>Obtén más información sobre las <a href="/solutions/continuous-delivery" track-type="solution" track-name="internalLink" track-metadata-position="body">soluciones de entrega continua</a> de Google Cloud.</li>
<li>Lee el <a href="https://landing.google.com/sre/books/" target="external" track-type="article" track-name="externalLink" track-metadata-position="body">libro sobre ingeniería de confiabilidad de sitios (SRE)</a>, en particular el <a href="https://landing.google.com/sre/sre-book/chapters/release-engineering/" target="external" track-type="article" track-name="externalLink" track-metadata-position="body">Capítulo 8: Ingeniería de lanzamientos</a>.</li>
<li>Lee <a href="http://www.informit.com/articles/article.aspx?p=1833567" target="external" track-type="article" track-name="externalLink" track-metadata-position="body" class="external">Four Principles of Low-Risk Software Releases</a> (Cuatro principios de las actualizaciones de software de bajo riesgo).</li>
<li>Explora nuestro <a href="https://www.devops-research.com/research.html">programa de investigación</a> de DevOps.</li>
<li>Realiza la <a href="https://www.devops-research.com/quickcheck.html">verificación rápida de DevOps</a> para comprender cuál es tu posición en comparación con el resto de la industria.</li>
</ul>

</body></html>