---
status: proposed
date: 2023-10-29
deciders: davidstanke
consulted: jesseduke
---
# Add anchor links to all headings, using vanilla js

## Context and Problem Statement
On informational/technical sites, there is a common pattern in which HTML heading elements are decorated with anchor link elements that make it easy to copy links to that specific heading. This facilitates sharing: _User A_ can browse the site and find a specific section that they wish to share with a colleague, then copy the link to that section and send the "deeplinked" URL to _User B_. When _User B_ makes a request to that URL, their browser scrolls directly to the target section.

Some examples of sites that use this pattern are the documentation pages on cloud.google.com, and README files as rendered on github.com.

For dora.dev, this is relevant for use cases like the FAQ or research questions, which are long pages with multiple specific sections that users may wish to access directly.

## Considered Options

* **Markdown render hooks** A common pattern to create functionality like this is to build it into a Hugo render hook. In such an implementation, the logic is processed server-side, which tends to be less fragile, and reduces resource requirements on the client browser. However, this only works for HTML elements that are generated by the markdown renderer. HTML elements which are coded into the template files (which includes the headings on research questions pages) would be ignored in this case. That could be solved by building a custom "partial" layout, but it's inelegant to have two solutions for one problem. So we opted to render these elements client-side. We expect that the performance impact on the user experience will be negligable
* **Alpine.js** Since dora.dev uses Alpine for various elements of interactivity, we considered implementing this feature with Alpine. However, in the interest of portability, and to avoid potential conflicts with existing Alpine functionality, we opted to use a "vanilla" (non-framework) Javascript implementation. Since there's no state mechanism needed, it's not really consistent with the type of problem that Javascript frameworks are typically used for, so, subjectively, it feels appropriate to use vanilla JS.

## Decision Outcome
A "vanilla" javascript implementation, invoked by including a partial template from the Hugo theme, activates this feature. Any heading which includes an `id` attribute (and therefore can be addressed via a `#` reference in the URL) will automatically be detected and decorated with a link icon that appears on hover.
